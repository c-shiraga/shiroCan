<% if @book.errors.any? %>
  <div id="error_explanation" class="alert alert-danger">
    <ul class="error-message-area">
      <% @book.errors.full_messages.each do |message| %>
        <li class="error-message"><%= message %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<% @title = "イラスト投稿" %>
<h1><%= @title %></h1>
<div class="form-area">
    <%= form_with model: @book, local: true do |f| %>
        <div class="field">
            <%= f.label :title, "タイトル", class: "form-label" %><br />
            <%= f.text_field :title, class: "form-field" %>
        </div>
        <div class="field">
            <%= f.label :body, "コメント", class: "form-label" %><br />
            <%= f.text_area :body, class: "text-field" %>
        </div>
        <div class="field">
            <%= f.label :image, "画像", class: "form-label" %><br />
            <%= f.file_field :image %>
        </div>
        <p class="image-field-message">※画像は、jpg、jpeg、gif、pngのみを選択してください</p>
        <div>
            <%= f.submit "投稿", class:"btn" %>
        </div>
    <% end %>
</div>
<h1>過去の投稿</h1>
<div class="image-area">
    <% @books.each do |book| %>
        <% if current_user.name == book.user.name %>
            <div class="image-collection">
                <p class="image"><%= image_tag book.image.to_s, class:"image-main" %></p>
                <% if book.user == current_user %>
                    <%= link_to "削除", book, method: :delete, data: {confirm: "本当に削除してよろしいですか？"}, class: "btn" %>
                <% end %>
            </div>
        <% end %>
    <% end %>
</div>
